
{% block content %}

  <style type="text/css">@charset "UTF-8";[ng\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak,.ng-hide:not(.ng-hide-animate){display:none !important;}ng\:form{display:block;}.ng-animate-shim{visibility:hidden;}.ng-anchor{position:absolute;}</style>
  <meta charset="UTF-8">
  <style>
        a {
            color: white;
        }
        a:link {
            color: white;
        }
        a:visited {
            color:white;
        }
        a:hover {
            color:white;
        }
  </style>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"/>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js" >  </script>

    <div class="container">
        <div class="row">
          <div class="col-xs-12">
            <h1>Contact List <small>by: Sajitha Liyanage</small></h1>
            <hr>
            <table class="table table-striped" style="margin-top:30px;">
              <thead>
                <tr>
                  <th style="text-align:center;">Name</th>
                  <th style="text-align:center;">Email</th>
                  <th style="text-align:center;">Note</th>
                  <th style="text-align:center;">Actions</th>
                </tr>
              </thead>
             
              <tbody >
                  
                    <tr>
                      <form  name="myform" onsubmit="return OnSubmitForm();" action="{% url 'bootstrap_task:book_new' %}" method="post">{% csrf_token %}
                        <td>
                          <input id="name" type="text" placeholder="Enter Name" class="form-control" name = "name"/>
                        </td>
                        <td>
                            <input id="email" type="text" placeholder="Enter Email" class="form-control" name="email"/>
                        </td>
                        <td>
                            <input id="note" type="text" placeholder="Enter Detail" class="form-control" name="note"/>
                        </td>
                        
                        <td>
                          <center>
                            <input type="submit" value="Create Contact" class="btn btn-warning"/>
                          </center>
                        </td>
                        <!--form  action="{% url 'bootstrap_task:book_edit' 55 %}" method="post">{% csrf_token %}-->
                        <td>
                          <center>
                            <input id="cmdUpdate" type="submit" value="Update Contact" class="btn btn-info" disabled="disabled"/>
                          </center>
                        </td>
                        <td>
                            <input id="id" style="display:none"/>
                        </td>
                      </form>

                    </tr>
                
              </tbody>
            
              <tbody ng-controller="addcontrolle" class="ng-scope">
                <!-- ngRepeat: contact in contactlist -->
                {% for book in object_list %}
                <form  action="{% url 'bootstrap_task:book_delete' book.id %}" method="post">{% csrf_token %}
                  <tr class="ng-scope">
                    <td id="selname" style="text-align:center;" class="ng-binding">{{ book.name }}</td>
                    <td id="selemail" style="text-align:center;" class="ng-binding">{{ book.email }}</td>
                    <td id="selnote" style="text-align:center;" class="ng-binding">{{ book.note }}</td>
                    <td style="text-align:center;">
                      <center>
                        <!--a href="{% url 'bootstrap_task:book_delete' book.id %}" class="btn btn-danger">Delete</a-->
                        <input type="submit" value="Delete" class="btn btn-danger"/>
                      </center>
                    </td>
                    <td style="text-align:center;">
                      <center>
                        <button type="button" class="btn btn-success" onclick="myFunc('{{ book.id }}','{{ book.name }}','{{ book.email }}','{{ book.note }}')"">
                            Update
                            <script>    
                                myFunc = function(id, name, email, note)
                                {
                                  console.log(id, name, email, note);
                                  $("#id").val(id);
                                  $("#name").val(name);
                                  $("#email").val(email);
                                  $("#note").val(note);
                                  $("#cmdUpdate").prop("disabled", false);;
                                }
                                function OnSubmitForm()
                                {
                                  id = $("#id").val();
                                  if(!id)
                                  {
                                    document.myform.action ="{% url 'bootstrap_task:book_new' %}";
                                  }
                                  else    
                                  {
                                    url = "{% url 'bootstrap_task:book_edit' 1 %}";
                                    url = url.substring(0, url.length-1) + id;
                                    document.myform.action = url;
                                    $("#cmdUpdate").prop("disabled", true);;
                                  }
                                  return true;
                                }

                              </script>
                        </button>
                        
                      </center>
                    </td>
                  </tr>
                </form>
                {% endfor %}
                <!-- end ngRepeat: contact in contactlist -->
              </tbody>
            </table>
          </div>
        </div>
</div>

{% endblock %}