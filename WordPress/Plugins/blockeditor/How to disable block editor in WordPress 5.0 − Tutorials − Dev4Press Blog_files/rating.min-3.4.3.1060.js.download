var gdrts_rating_core,gdrts_rating_help,gdrts_rating_dynamic;(function($,f,g,h){gdrts_rating_help={remote:{url:function(){return gdrts_rating_data.url+"?action="+gdrts_rating_data.handler},call:function(a,b,c){$.ajax({url:this.url(),type:"post",dataType:"json",data:{req:JSON.stringify(a)},success:b,error:c})},error:function(a,b,c){var d="Uncaught Error: "+c;if(a.status===0){d="No internet connection, please verify network settings."}else if(a.status===404){d="Error 404: Requested page not found."}else if(a.status===500){d="Error 500: Internal Server Error."}else if(b==="timeout"){d="Request timed out."}else if(b==="abort"){d="Request aborted."}d='GD Rating System - AJAX Error: '+d;if(gdrts_rating_data.ajax_error==="alert"){alert(d)}else if(gdrts_rating_data.ajax_error==="console"){if(f.console){console.log(d)}}}},char:function(a){if(a.substring(0,3)==="&#x"){a=a.replace(";","");a=parseInt(a.substring(3),16);a=String.fromCharCode(a)}else if(a.substring(0,2)==="&#"){a=a.replace(";","");a=parseInt(a.substring(2),10);a=String.fromCharCode(a)}return a}};gdrts_rating_dynamic={init:function(){var a={todo:"dynamic",items:[]};$(".gdrts-dynamic-block").each(function(){a.items.push(gdrts_rating_dynamic.process(this))});gdrts_rating_help.remote.call(a,gdrts_rating_dynamic.load,gdrts_rating_help.remote.error)},process:function(a){var b=JSON.parse($(".gdrts-rating-data",$(a)).html());b.did=gdrts_rating_core.storage.did;$(a).attr("id","gdrts-dynamic-id-"+gdrts_rating_core.storage.did).addClass("gdrts-dynamic-loading");gdrts_rating_core.storage.did++;return b},load:function(c){if(c.status&&c.items&&c.status==="ok"){$.each(c.items,function(a,b){gdrts_rating_dynamic.item(b)})}},item:function(a){var b=$(a.render).hide();$("#gdrts-dynamic-id-"+a.did).fadeOut(150,function(){$(this).replaceWith(b);b.fadeIn(300,function(){gdrts_rating_core.common.process(this);if($(this).hasClass("gdrts-method-stars-rating")){gdrts_rating_core.stars_rating.single.process($(".gdrts-stars-rating",this))}else if($(this).hasClass("gdrts-method-slider-rating")){gdrts_rating_core.slider_rating.single.process($(".gdrts-slider-rating",this))}else if($(this).hasClass("gdrts-method-thumbs-rating")){gdrts_rating_core.thumbs_rating.single.process($(".gdrts-thumbs-rating",this))}else if($(this).hasClass("gdrts-method-like-this")){gdrts_rating_core.like_this.single.process($(".gdrts-like-this",this))}else if($(this).hasClass("gdrts-method-emote-this")){gdrts_rating_core.emote_this.single.process($(".gdrts-emote-this",this))}else{wp.gdrts.hooks.doAction("gdrts-dynamic-process-onload",this)}wp.gdrts.hooks.doAction("gdrts-rating-block-loaded",this,"dynamic-load")})})}};gdrts_rating_core={storage:{uid:1,did:1,stars:[],thumbs:[],likes:[]},_b:function(a){var b=$(a).data("uid");return $("#gdrts-unique-id-"+b)},_d:function(a){return this._b(a).data("rating")},init:function(){wp.gdrts.hooks.doAction("gdrts-core-init-start");if($(".gdrts-dynamic-block").length>0){gdrts_rating_dynamic.init()}$(".gdrts-rating-block, .gdrts-rating-list").each(function(){gdrts_rating_core.common.process(this)});gdrts_rating_core.common.methods($("body"));wp.gdrts.hooks.doAction("gdrts-core-init-finish")},live:function(){$(g).on("click",".gdrts-toggle-distribution",function(e){e.preventDefault();var a=$(this).hasClass("gdrts-toggle-open");if(a){$(this).removeClass("gdrts-toggle-open");$(this).html($(this).data("show"));$(".gdrts-rating-distribution",$(this).closest(".gdrts-rating-block")).slideUp()}else{$(this).addClass("gdrts-toggle-open");$(this).html($(this).data("hide"));$(".gdrts-rating-distribution",$(this).closest(".gdrts-rating-block")).slideDown()}})},style:{star:function(a,b){if($.inArray(a,gdrts_rating_core.storage.stars)===-1){var c=".gdrts-with-fonticon.gdrts-fonticon-"+b.name+".gdrts-"+b.name+"-"+b.font+".gdrts-stars-length-"+b.length,rule=c+" .gdrts-stars-empty::before, "+c+" .gdrts-stars-active::before, "+c+" .gdrts-stars-current::before { "+"content: \""+b.content+"\"; }",desc="/* stars: "+b.name+" - "+b.font+" - "+b.length+" */",id="gdrts-style-stars-"+b.name+"-"+b.font+"-"+b.length;$("<style type=\"text/css\" id=\""+id+"\">\r\n"+desc+"\r\n"+rule+"\r\n\r\n</style>").appendTo("head");gdrts_rating_core.storage.stars.push(a)}},thumb:function(a,b){if($.inArray(a,gdrts_rating_core.storage.thumbs)===-1){var c=".gdrts-with-fonticon.gdrts-fonticon-"+b.name+".gdrts-"+b.name+"-"+b.font+" .gdrts-thumb-symbol",rule=c+".gdrts-thumb-up-symbol::before { content: \""+b.up+"\"; }"+c+".gdrts-thumb-down-symbol::before { content: \""+b.down+"\"; }",desc="/* thumbs: "+b.name+" - "+b.font+" */",id="gdrts-style-thumbs-"+b.name+"-"+b.font;$("<style type=\"text/css\" id=\""+id+"\">\r\n"+desc+"\r\n"+rule+"\r\n\r\n</style>").appendTo("head");gdrts_rating_core.storage.thumbs.push(a)}},like:function(a,b){if($.inArray(a,gdrts_rating_core.storage.likes)===-1){var c=".gdrts-with-fonticon.gdrts-fonticon-"+b.name+".gdrts-"+b.name+"-"+b.font+" .gdrts-like-this-symbol",rule=c+".gdrts-like-symbol::before { content: \""+b.like+"\"; }"+c+".gdrts-liked-symbol::before { content: \""+b.liked+"\"; }"+c+".gdrts-clear-symbol::before { content: \""+b.clear+"\"; }",desc="/* likes: "+b.name+" - "+b.font+" */",id="gdrts-style-likes-"+b.name+"-"+b.font;$("<style type=\"text/css\" id=\""+id+"\">\r\n"+desc+"\r\n"+rule+"\r\n\r\n</style>").appendTo("head");gdrts_rating_core.storage.likes.push(a)}}},common:{process:function(a){if(!$(a).data().hasOwnProperty("rating")){var b=JSON.parse($(".gdrts-rating-data",$(a)).html());b.uid=gdrts_rating_core.storage.uid;$(a).attr("id","gdrts-unique-id-"+gdrts_rating_core.storage.uid).data("uid",gdrts_rating_core.storage.uid).data("rating",b);$(".gdrts-rating-element",a).data("uid",gdrts_rating_core.storage.uid);if($(a).hasClass("gdrts-rating-list")){wp.gdrts.hooks.doAction("gdrts-rating-list-process",a)}else{wp.gdrts.hooks.doAction("gdrts-rating-block-process",a)}gdrts_rating_core.storage.uid++}},methods:function(a){gdrts_rating_core.stars_rating.single.init(a);gdrts_rating_core.stars_rating.list.init(a);gdrts_rating_core.stars_review.single.init(a);gdrts_rating_core.stars_review.list.init(a);gdrts_rating_core.slider_rating.single.init(a);gdrts_rating_core.slider_rating.list.init(a);gdrts_rating_core.slider_review.single.init(a);gdrts_rating_core.slider_review.list.init(a);gdrts_rating_core.thumbs_rating.single.init(a);gdrts_rating_core.thumbs_rating.list.init(a);gdrts_rating_core.like_this.single.init(a);gdrts_rating_core.like_this.list.init(a);gdrts_rating_core.emote_this.single.init(a);gdrts_rating_core.emote_this.list.init(a);wp.gdrts.hooks.doAction("gdrts-core-common-methods-run",this,a)},error:function(a){$("#gdrts-unique-id-"+a.uid).removeClass("gdrts-vote-saving").append('<div class="gdrts-error-message">'+a.message+'</div>')}},thumbs_rating:{single:{init:function(a){$(".gdrts-rating-block .gdrts-thumbs-rating",a).each(function(){gdrts_rating_core.thumbs_rating.single.process(this)})},call:function(a,b){var c=gdrts_rating_core._d(a),args={todo:"vote",method:"thumbs-rating",item:c.item.item_id,nonce:c.item.nonce,render:c.render,uid:c.uid,meta:{value:b}};wp.gdrts.hooks.doAction("gdrts-rating-method-pre-ajax","thumbs-rating",gdrts_rating_core._b(a),args);gdrts_rating_help.remote.call(args,gdrts_rating_core.thumbs_rating.single.voted,gdrts_rating_help.remote.error)},voted:function(a){if(a.status==="error"){gdrts_rating_core.common.error(a)}else{var b=$(a.render).hide();$("#gdrts-unique-id-"+a.uid).fadeOut(150,function(){$(this).replaceWith(b);b.fadeIn(300,function(){gdrts_rating_core.common.process(this);gdrts_rating_core.thumbs_rating.single.process($(".gdrts-thumbs-rating",this));$(this).attr("role","alert");wp.gdrts.hooks.doAction("gdrts-thumbs-rating-voted",this);wp.gdrts.hooks.doAction("gdrts-rating-block-loaded",this,"thumbs-rating")})})}},adjust:function(a){var b=gdrts_rating_core._b(a).find(".gdrts-rating-text.gdrts-text-inline"),please=gdrts_rating_core._b(a).find(".gdrts-rating-please-wait.gdrts-text-inline"),rating=$(".gdrts-thumb-up",a),height=rating.outerHeight();if(b.length){b.css("height",height+"px").css("line-height",height+"px")}if(please.length){please.css("height",height+"px").css("line-height",height+"px")}},process:function(a){if($(a).data().hasOwnProperty("gdrts")){return}$(a).data("gdrts","done");var b=gdrts_rating_core._d(a).thumbs;gdrts_rating_core.thumbs_rating.single.adjust(a);if($(a).hasClass("gdrts-with-fonticon")){var c=b.type+"-"+b.name,obj={font:b.name,name:b.type,up:gdrts_rating_help.char(b.chars.up),down:gdrts_rating_help.char(b.chars.down)};gdrts_rating_core.style.thumb(c,obj)}if($(a).hasClass("gdrts-state-active")){gdrts_rating_core.thumbs_rating.single.activity(a,b)}wp.gdrts.hooks.doAction("gdrts-thumbs-rating-single-init",a)},activity:function(b,c){$(".gdrts-sr-button",b).click(function(e){e.preventDefault();var a=$(this).parent().find(".gdrts-sr-rating");gdrts_rating_core.thumbs_rating.single.do_rating($(a).val(),a.parent(),b)});$(".gdrts-thumb-up, .gdrts-thumb-down",b).click(function(e){var a=$(this).find(".gdrts-thumb-link").data("rating");gdrts_rating_core.thumbs_rating.single.do_rating(a,this,b)})},do_rating:function(a,t,b){if(gdrts_rating_core._b(t).hasClass("gdrts-vote-saving"))return;$(t).parent().find(".gdrts-thumb").removeClass("gdrts-thumb-selected");$(t).parent().find("input").val(a);$(t).addClass("gdrts-thumb-selected");if($(t).parent().hasClass("gdrts-passive-rating"))return;var c=wp.gdrts.hooks.applyFilters("gdrts-thumbs-rating-do-vote",true,a);if(c){gdrts_rating_core._b($(t).parent()).addClass("gdrts-vote-saving");gdrts_rating_core.thumbs_rating.single.call(b,a)}else{wp.gdrts.hooks.doAction("gdrts-thumbs-rating-vote-prevented",a)}}},list:{init:function(a){$(".gdrts-rating-list .gdrts-thumbs-rating",a).each(function(){gdrts_rating_core.thumbs_rating.list.process(this)})},process:function(a){if($(a).data().hasOwnProperty("gdrts")){return}$(a).data("gdrts","done");var b=gdrts_rating_core._d(a).thumbs;if($(a).hasClass("gdrts-with-fonticon")){var c=b.type+"-"+b.name,obj={font:b.name,name:b.type,up:gdrts_rating_help.char(b.chars.up),down:gdrts_rating_help.char(b.chars.down)};gdrts_rating_core.style.thumb(c,obj)}wp.gdrts.hooks.doAction("gdrts-thumbs-rating-list-init",a)}}},emote_this:{single:{init:function(a){$(".gdrts-rating-block .gdrts-emote-this",a).each(function(){gdrts_rating_core.emote_this.single.process(this)})},call:function(a,b){var c=gdrts_rating_core._d(a),args={todo:"vote",method:"emote-this",series:c.render.method.series,item:c.item.item_id,nonce:c.item.nonce,render:c.render,uid:c.uid,meta:{value:b}};wp.gdrts.hooks.doAction("gdrts-rating-method-pre-ajax","emote-this",gdrts_rating_core._b(a),args);gdrts_rating_help.remote.call(args,gdrts_rating_core.emote_this.single.voted,gdrts_rating_help.remote.error)},voted:function(a){if(a.status==="error"){gdrts_rating_core.common.error(a)}else{var b=$(a.render).hide();$("#gdrts-unique-id-"+a.uid).fadeOut(150,function(){$(this).replaceWith(b);b.fadeIn(300,function(){gdrts_rating_core.common.process(this);gdrts_rating_core.emote_this.single.process($(".gdrts-emote-this",this));$(this).attr("role","alert");wp.gdrts.hooks.doAction("gdrts-emote-this-voted",this);wp.gdrts.hooks.doAction("gdrts-rating-block-loaded",this,"emote-this")})})}},process:function(a){if($(a).data().hasOwnProperty("gdrts")){return}$(a).data("gdrts","done");var b=gdrts_rating_core._d(a).emote;if($(a).hasClass("gdrts-state-active")){gdrts_rating_core.emote_this.single.activity(a,b)}if(b.responsive){$(f).on("load resize orientationchange",{el:a,data:b},gdrts_rating_core.responsive.emotes);gdrts_rating_core.responsive._e({el:a,data:b})}wp.gdrts.hooks.doAction("gdrts-emote-this-single-init",a)},activity:function(b,c){$(".gdrts-sr-button",b).click(function(e){e.preventDefault();var a=$(this).parent().find(".gdrts-sr-rating");gdrts_rating_core.emote_this.single.do_rating($(a).val(),a.parent(),b)});$(".gdrts-emote-element",b).click(function(e){var a=$(this).data("rating");gdrts_rating_core.emote_this.single.do_rating(a,this,b)})},do_rating:function(a,t,b){if(gdrts_rating_core._b(t).hasClass("gdrts-vote-saving"))return;$(t).parent().find(".gdrts-emote-element").removeClass("gdrts-emote-selected");$(t).parent().parent().find("input").val(a);$(t).addClass("gdrts-emote-selected");if($(t).parent().parent().hasClass("gdrts-passive-rating"))return;var c=wp.gdrts.hooks.applyFilters("gdrts-emote-this-do-vote",true,a);if(c){gdrts_rating_core._b($(t).parent()).addClass("gdrts-vote-saving");gdrts_rating_core.emote_this.single.call(b,a)}else{wp.gdrts.hooks.doAction("gdrts-emote-this-vote-prevented",a)}}},list:{init:function(a){$(".gdrts-rating-list .gdrts-emote-this",a).each(function(){gdrts_rating_core.emote_this.list.process(this)})},process:function(a){if($(a).data().hasOwnProperty("gdrts")){return}$(a).data("gdrts","done");wp.gdrts.hooks.doAction("gdrts-emote-this-list-init",a)}}},like_this:{single:{init:function(a){$(".gdrts-rating-block .gdrts-like-this",a).each(function(){gdrts_rating_core.like_this.single.process(this)});$(g).on("mouseover",".gdrts-likes-theme-expanding .gdrts-like:not(.gdrts-like-expanded)",function(){$(this).addClass("gdrts-like-expanded");$(".gdrts-like-this-suffix",this).animate({"margin-left":"5px"},100,function(){$(this).animate({"max-width":"256px"},150,function(){$(this).parent().next().animate({"padding":"5px 10px 5px 20px"},100,function(){$(this).animate({"max-width":"512px"},150)})})})})},call:function(a,b){var c=gdrts_rating_core._d(a),args={todo:"vote",method:"like-this",item:c.item.item_id,nonce:c.item.nonce,render:c.render,uid:c.uid,meta:{value:b}};wp.gdrts.hooks.doAction("gdrts-rating-method-pre-ajax","like-this",gdrts_rating_core._b(a),args);gdrts_rating_help.remote.call(args,gdrts_rating_core.like_this.single.voted,gdrts_rating_help.remote.error)},voted:function(a){if(a.status==="error"){gdrts_rating_core.common.error(a)}else{var b=$(a.render).hide();$("#gdrts-unique-id-"+a.uid).fadeOut(150,function(){$(this).replaceWith(b);b.fadeIn(300,function(){gdrts_rating_core.common.process(this);gdrts_rating_core.like_this.single.process($(".gdrts-like-this",this));$(this).attr("role","alert");wp.gdrts.hooks.doAction("gdrts-like-this-voted",this);wp.gdrts.hooks.doAction("gdrts-rating-block-loaded",this,"like-this")})})}},adjust:function(a){var b=gdrts_rating_core._b(a).find(".gdrts-rating-text.gdrts-text-inline"),please=gdrts_rating_core._b(a).find(".gdrts-rating-please-wait.gdrts-text-inline"),rating=$(".gdrts-like-link",a),height=rating.outerHeight();if(b.length){b.css("height",height+"px").css("line-height",height+"px")}if(please.length){please.css("height",height+"px").css("line-height",height+"px")}},process:function(a){var b=gdrts_rating_core._d(a).likes;gdrts_rating_core.like_this.single.adjust(a);if($(a).hasClass("gdrts-with-fonticon")){var c=b.type+"-"+b.name,obj={font:b.name,name:b.type,like:gdrts_rating_help.char(b.chars.like),liked:gdrts_rating_help.char(b.chars.liked),clear:gdrts_rating_help.char(b.chars.clear)};gdrts_rating_core.style.like(c,obj)}if($(a).hasClass("gdrts-state-active")){gdrts_rating_core.like_this.single.activity(a,b)}wp.gdrts.hooks.doAction("gdrts-like-this-single-init",a)},activity:function(b,c){$(".gdrts-sr-button",b).click(function(e){e.preventDefault();gdrts_rating_core.like_this.single.do_rating($(this).data("rating"),$(this).parent(),b)});$(".gdrts-like-link",b).click(function(e){var a=$(this).find(".gdrts-clear-symbol, .gdrts-like-symbol").data("rating");gdrts_rating_core.like_this.single.do_rating(a,this,b)})},do_rating:function(a,t,b){if(gdrts_rating_core._b(t).hasClass("gdrts-vote-saving"))return;var c=wp.gdrts.hooks.applyFilters("gdrts-like-this-do-vote",true,a);if(c){gdrts_rating_core._b($(t).parent()).addClass("gdrts-vote-saving");gdrts_rating_core.like_this.single.call(b,a)}else{wp.gdrts.hooks.doAction("gdrts-like-this-vote-prevented",a)}}},list:{init:function(a){$(".gdrts-rating-list .gdrts-like-this",a).each(function(){gdrts_rating_core.like_this.list.process(this)})},process:function(a){if($(a).data().hasOwnProperty("gdrts")){return}$(a).data("gdrts","done");var b=gdrts_rating_core._d(a).likes;if($(a).hasClass("gdrts-with-fonticon")){var c=b.type+"-"+b.name,obj={font:b.name,name:b.type,like:gdrts_rating_help.char(b.chars.like),liked:gdrts_rating_help.char(b.chars.liked),clear:gdrts_rating_help.char(b.chars.clear)};gdrts_rating_core.style.like(c,obj)}wp.gdrts.hooks.doAction("gdrts-like-this-list-init",a)}}},stars_rating:{single:{init:function(a){$(".gdrts-rating-block .gdrts-stars-rating",a).each(function(){gdrts_rating_core.stars_rating.single.process(this)})},call:function(a,b){var c=gdrts_rating_core._d(a),args={todo:"vote",method:"stars-rating",item:c.item.item_id,nonce:c.item.nonce,render:c.render,uid:c.uid,meta:{value:b,max:c.stars.max}};wp.gdrts.hooks.doAction("gdrts-rating-method-pre-ajax","stars-rating",gdrts_rating_core._b(a),args);gdrts_rating_help.remote.call(args,gdrts_rating_core.stars_rating.single.voted,gdrts_rating_help.remote.error)},voted:function(a){if(a.status==="error"){gdrts_rating_core.common.error(a)}else{var b=$(a.render).hide();$("#gdrts-unique-id-"+a.uid).fadeOut(150,function(){$(this).replaceWith(b);b.fadeIn(300,function(){gdrts_rating_core.common.process(this);gdrts_rating_core.stars_rating.single.process($(".gdrts-stars-rating",this));$(this).attr("role","alert");wp.gdrts.hooks.doAction("gdrts-stars-rating-voted",this);wp.gdrts.hooks.doAction("gdrts-rating-block-loaded",this,"stars-rating")})})}},process:function(a){if($(a).data().hasOwnProperty("gdrts")){return}$(a).data("gdrts","done");var b=gdrts_rating_core._d(a).stars,id="#gdrts-unique-id-"+gdrts_rating_core._d(a).uid,labels=gdrts_rating_core._d(a).labels;if($(a).hasClass("gdrts-with-fonticon")){var c=b.type+"-"+b.name+"-"+b.max,obj={font:b.name,name:b.type,length:b.max,content:Array(b.max+1).join(gdrts_rating_help.char(b.char))};gdrts_rating_core.style.star(c,obj)}if($(a).hasClass("gdrts-state-active")){gdrts_rating_core.stars_rating.single.activity(a,b,labels)}if(b.responsive){$(f).on("load resize orientationchange",{el:a,data:b},gdrts_rating_core.responsive.stars);gdrts_rating_core.responsive._s({el:a,data:b})}wp.gdrts.hooks.doAction("gdrts-stars-rating-single-init",a)},activity:function(b,c,d){$(".gdrts-stars-empty",b).mouseleave(function(e){if($(this).hasClass("gdrts-vote-saving"))return;var a=$(this).parent().find("input").val(),width=$(this).width(),star=width/c.max,current=star*a;$(b).data("selected",a).attr("title","");$(".gdrts-stars-active",this).width(current)});$(".gdrts-stars-empty",b).mousemove(function(e){if($(this).hasClass("gdrts-vote-saving"))return;var a=$(this).offset(),width=$(this).width(),star=width/c.max,res=c.resolution,step=res*(star/100),steps=(c.max*star)/step,x=e.pageX-a.left,parts=gdrts_rating_data.rtl?steps-Math.ceil(x/step)+1:Math.ceil(x/step),current=parseFloat((parts*(res/100)).toFixed(2)),lid=Math.ceil(current*1),label=d[lid-1],active=parts*step;$(b).data("selected",current).attr("title",current+": "+label);$(".gdrts-stars-active",this).width(active)});$(".gdrts-sr-button",b).click(function(e){e.preventDefault();var a=$(this).parent().find(".gdrts-sr-rating");gdrts_rating_core.stars_rating.single.do_rating($(a).val(),a.parent(),b)});$(".gdrts-stars-empty",b).click(function(e){e.preventDefault();gdrts_rating_core.stars_rating.single.do_rating($(b).data("selected"),this,b)})},do_rating:function(a,t,b){if($(t).hasClass("gdrts-vote-saving"))return;$(t).parent().find("input").val(a);if($(t).parent().hasClass("gdrts-passive-rating"))return;var c=wp.gdrts.hooks.applyFilters("gdrts-stars-rating-do-vote",true,a);if(c){$(t).addClass("gdrts-vote-saving");gdrts_rating_core._b($(t).parent()).addClass("gdrts-vote-saving");gdrts_rating_core.stars_rating.single.call(b,a)}else{wp.gdrts.hooks.doAction("gdrts-stars-rating-vote-prevented")}}},list:{init:function(a){$(".gdrts-rating-list .gdrts-stars-rating",a).each(function(){gdrts_rating_core.stars_rating.list.process(this)})},process:function(a){if($(a).data().hasOwnProperty("gdrts")){return}$(a).data("gdrts","done");var b=gdrts_rating_core._d(a).stars;if($(a).hasClass("gdrts-with-fonticon")){var c=b.type+"-"+b.name+"-"+b.max,obj={font:b.name,name:b.type,length:b.max,content:Array(b.max+1).join(gdrts_rating_help.char(b.char))};gdrts_rating_core.style.star(c,obj)}if(b.responsive){$(f).on("load resize orientationchange",{el:a,data:b},gdrts_rating_core.responsive.stars);gdrts_rating_core.responsive._s({el:a,data:b})}wp.gdrts.hooks.doAction("gdrts-stars-rating-list-init",a)}}},stars_review:{single:{init:function(a){$(".gdrts-rating-block .gdrts-stars-review",a).each(function(){gdrts_rating_core.stars_review.single.process(this)})},process:function(a){if($(a).data().hasOwnProperty("gdrts")){return}$(a).data("gdrts","done");var b=gdrts_rating_core._d(a).stars;if($(a).hasClass("gdrts-with-fonticon")){var c=b.type+"-"+b.name+"-"+b.max,obj={font:b.name,name:b.type,length:b.max,content:Array(b.max+1).join(gdrts_rating_help.char(b.char))};gdrts_rating_core.style.star(c,obj)}if(b.responsive){$(f).on("load resize orientationchange",{el:a,data:b},gdrts_rating_core.responsive.stars);gdrts_rating_core.responsive._s({el:a,data:b})}wp.gdrts.hooks.doAction("gdrts-stars-review-single-init",a)}},list:{init:function(a){$(".gdrts-rating-list .gdrts-stars-review",a).each(function(){gdrts_rating_core.stars_review.list.process(this)})},process:function(a){if($(a).data().hasOwnProperty("gdrts")){return}$(a).data("gdrts","done");var b=gdrts_rating_core._d(a).stars;if($(a).hasClass("gdrts-with-fonticon")){var c=b.type+"-"+b.name+"-"+b.max,obj={font:b.name,name:b.type,length:b.max,content:Array(b.max+1).join(gdrts_rating_help.char(b.char))};gdrts_rating_core.style.star(c,obj)}if(b.responsive){$(f).on("load resize orientationchange",{el:a,data:b},gdrts_rating_core.responsive.stars);gdrts_rating_core.responsive._s({el:a,data:b})}wp.gdrts.hooks.doAction("gdrts-stars-review-list-init",a)}}},slider_rating:{single:{init:function(a){$(".gdrts-rating-block .gdrts-slider-rating",a).each(function(){gdrts_rating_core.slider_rating.single.process(this)})},call:function(a,b){var c=gdrts_rating_core._d(a),args={todo:"vote",method:"slider-rating",item:c.item.item_id,nonce:c.item.nonce,render:c.render,uid:c.uid,meta:{value:b,max:c.slider.range}};wp.gdrts.hooks.doAction("gdrts-rating-method-pre-ajax","slider-rating",gdrts_rating_core._b(a),args);gdrts_rating_help.remote.call(args,gdrts_rating_core.slider_rating.single.voted,gdrts_rating_help.remote.error)},voted:function(a){if(a.status==="error"){gdrts_rating_core.common.error(a)}else{var b=$(a.render).hide();$("#gdrts-unique-id-"+a.uid).fadeOut(150,function(){$(this).replaceWith(b);b.fadeIn(300,function(){gdrts_rating_core.common.process(this);gdrts_rating_core.slider_rating.single.process($(".gdrts-slider-rating",this));$(this).attr("role","alert");wp.gdrts.hooks.doAction("gdrts-slider-rating-voted",this);wp.gdrts.hooks.doAction("gdrts-rating-block-loaded",this,"slider-rating")})})}},process:function(a){if($(a).data().hasOwnProperty("gdrts")){return}$(a).data("gdrts","done");var b=gdrts_rating_core._d(a).slider;gdrts_rating_core.slider_rating.single.activity(a,b);wp.gdrts.hooks.doAction("gdrts-slider-rating-single-init",a)},activity:function(b,c){var d={theme:"default",hideHandle:false,showMinMax:true,showGrid:true,showLabel:true,showRating:true,onChange:function(a){gdrts_rating_core.slider_rating.single.do_rating(a,b)}},options;options=$.extend({},d,c.options);if(options.showRating===false){options.showRaterLabel=true}$(".gdrts-rating-slider-range",b).gdRatingSlider(options)},do_rating:function(a,b){if($(b).hasClass("gdrts-vote-saving"))return;if($(b).hasClass("gdrts-passive-rating"))return;var c=wp.gdrts.hooks.applyFilters("gdrts-slider-rating-do-vote",true,a);if(c){$(b).addClass("gdrts-vote-saving");gdrts_rating_core._b(b).addClass("gdrts-vote-saving");$(".gdrts-rating-slider-range",b).gdRatingSlider("disable");gdrts_rating_core.slider_rating.single.call(b,a)}else{wp.gdrts.hooks.doAction("gdrts-slider-rating-vote-prevented")}}},list:{init:function(a){$(".gdrts-rating-list .gdrts-slider-rating",a).each(function(){gdrts_rating_core.slider_rating.list.process(this)})},process:function(a){if($(a).data().hasOwnProperty("gdrts")){return}$(a).data("gdrts","done");var b=gdrts_rating_core._d(a).slider;var c={theme:"default",hideHandle:true,showMinMax:false,showGrid:false,showLabel:false,showRating:true},options;options=$.extend({},c,b.options);if(options.showRating===false){options.showRaterLabel=true}$(".gdrts-rating-slider-range",a).gdRatingSlider(options);wp.gdrts.hooks.doAction("gdrts-slider-rating-list-init",a)}}},slider_review:{single:{init:function(a){$(".gdrts-rating-block .gdrts-slider-review",a).each(function(){gdrts_rating_core.slider_review.single.process(this)})},process:function(a){if($(a).data().hasOwnProperty("gdrts")){return}$(a).data("gdrts","done");var b=gdrts_rating_core._d(a).slider;gdrts_rating_core.slider_review.single.activity(a,b);wp.gdrts.hooks.doAction("gdrts-slider-review-single-init",a)},activity:function(a,b){var c={theme:"default",hideHandle:true,showMinMax:true,showGrid:true,showRating:true},options;options=$.extend({},c,b.options);if(options.showRating===false){options.showRaterLabel=true}$(".gdrts-rating-slider-range",a).gdRatingSlider(options)}},list:{init:function(a){$(".gdrts-rating-list .gdrts-slider-review",a).each(function(){gdrts_rating_core.slider_review.list.process(this)})},process:function(a){if($(a).data().hasOwnProperty("gdrts")){return}$(a).data("gdrts","done");var b=gdrts_rating_core._d(a).slider;var c={theme:"default",hideHandle:true,showMinMax:false,showGrid:false,showRating:true},options;options=$.extend({},c,b.options);if(options.showRating===false){options.showRaterLabel=true}$(".gdrts-rating-slider-range",a).gdRatingSlider(options);wp.gdrts.hooks.doAction("gdrts-slider-review-list-init",a)}}},responsive:{_e:function(a){var b=a.el,data=a.data,cell=$(b).find("li").first(),cells=$(b).find("li").length,available=$(b).width(),padding=cell.innerWidth()-cell.width(),new_size=(available/cells)-padding;new_size=new_size>data.size||new_size===0?data.size:new_size;$(b).find("li .gdrts-emote-element-icon").css("max-height",new_size+"px").css("max-width",new_size+"px")},_s:function(a){var b=a.el,data=a.data,available=$(b).parent().width(),new_size=Math.floor(available/data.max);new_size=new_size>data.size||new_size===0?data.size:new_size;if(data.type==="image"){$(".gdrts-stars-empty, .gdrts-stars-active, .gdrts-stars-current",b).css("background-size",new_size+"px");$(b).css("height",new_size+"px").css("width",data.max*new_size+"px")}else{$(".gdrts-stars-empty",b).css("font-size",new_size+"px").css("line-height",new_size+"px");$(b).css("line-height",new_size+"px").css("height",new_size+"px")}},emotes:function(e){gdrts_rating_core.responsive._e(e.data)},stars:function(e){gdrts_rating_core.responsive._s(e.data)}}};gdrts_rating_custom={init:function(){wp.gdrts.hooks.addAction("gdrts-rating-block-loaded",function(a,b){gdrts_rating_custom.run(a)});gdrts_rating_custom.run($("body"))},run:function(a){gdrts_rating_custom.custom_stars.init(a);gdrts_rating_custom.custom_sliders.init(a);gdrts_rating_custom.custom_thumbs.init(a);gdrts_rating_custom.custom_likes.init(a)},custom_thumbs:{init:function(a){$(".gdrts-custom-thumbs-block",a).each(function(){gdrts_rating_custom.custom_thumbs.process(this)})},process:function(a){if($(a).hasClass("gdrts-with-fonticon")){var b=$(a).data();var c=b.type+"-"+b.name,obj={font:b.name,name:b.type,up:gdrts_rating_help.char(b.up),down:gdrts_rating_help.char(b.down)};gdrts_rating_core.style.thumb(c,obj)}}},custom_likes:{init:function(a){$(".gdrts-custom-like-block",a).each(function(){gdrts_rating_custom.custom_likes.process(this)})},process:function(a){if($(a).hasClass("gdrts-with-fonticon")){var b=$(a).data();var c=b.type+"-"+b.name,obj={font:b.name,name:b.type,like:gdrts_rating_help.char(b.char),liked:gdrts_rating_help.char(b.char),clear:gdrts_rating_help.char(b.char)};gdrts_rating_core.style.like(c,obj)}}},custom_stars:{init:function(a){$(".gdrts-custom-stars-block",a).each(function(){gdrts_rating_custom.custom_stars.process(this)})},process:function(a){if($(a).hasClass("gdrts-with-fonticon")){var b=$(a).data();var c=b.type+"-"+b.name+"-"+b.max,obj={font:b.name,name:b.type,length:b.max,content:Array(b.max+1).join(gdrts_rating_help.char(b.char))};gdrts_rating_core.style.star(c,obj)}}},custom_sliders:{init:function(a){$(".gdrts-custom-slider-block",a).each(function(){gdrts_rating_custom.custom_sliders.process(this)})},process:function(a){var b={hideHandle:true};$(".gdrts-rating-slider-range",a).gdRatingSlider(b)}}};f.wp=f.wp||{};f.wp.gdrts=f.wp.gdrts||{};f.wp.gdrts.help=gdrts_rating_help;f.wp.gdrts.dynamic=gdrts_rating_dynamic;f.wp.gdrts.core=gdrts_rating_core;f.wp.gdrts.custom=gdrts_rating_custom;f.wp.gdrts.core.init();f.wp.gdrts.core.live();f.wp.gdrts.custom.init()})(jQuery,window,document);
