define(["../room","angular"],function(t){"use strict";t.controller("eoComposerAttachmentController",["$scope","$timeout","eoRoomTimestampFormat",function(t,e,o){t.$watch(function(){for(var e=[],o=0;o<t.attachments.length;o++)t.attachments[o]&&t.attachments[o].status&&e.push(t.attachments[o].status.errorMessage);return e},function(){t.$emit("composer:attachment:errorStateChange")},!0),t.$on("composer:attachment:delete",function(o,a){e(function(){t.deleteAttachment(t.attachments,t.attachments[a])})}),t.onPreviewLoaded=function(){t.$emit("composer:attachment:previewLoaded")},t.deleteAttachment=function(e,o){var a=e.indexOf(o);e.splice(a,1),"eo:file"===o.objectType&&o.abort(),t.$emit("composer:attachment:deleted",o)},t.quoteTimestampFormat=o}])});