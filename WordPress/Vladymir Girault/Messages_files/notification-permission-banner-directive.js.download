define(["./layout"],function(t){"use strict";t.controller("eoNotificationPermissionBannerController",["$rootScope","$scope","$cookies","eoNotification","eoUsers","eoAuth","eoDashContext","$state","deviceDetector",function(t,o,i,e,n,s,r,a,c){var u=!0,f=function(){n.getLocalSettings(s.user.userId).then(function(n){var s=!n.notifications||"all"!==n.notifications.desktop&&"important"!==n.notifications.desktop;o.showNotif=!s&&!t.isWidget&&e.supported&&e.alwaysAsk()&&!r.isVideoPage()&&"true"!==i.get("hide_dash_notif_bar"),t.showDesktopNotificationBanner=o.showNotif,t.$emit("autoheight:recalculate"),o.isMobile=r.isMobile()})};o.$onRootScope("auth:change",function(t,i){o.user=i&&i.user,o.user&&u&&(u=!1,f())}),o.requestNotif=function(){e.request().finally(f)},o.dismissNotifAlert=function(){o.showNotif=!1,i.put("hide_dash_notif_bar",!0),t.$emit("autoheight:recalculate")},o.showNotificationHeader=function(){return t.tlConnected&&o.showNotif&&o.user&&!o.isMobile&&!a.is("login")&&!c.isMobile()}}]),t.directive("eoNotificationPermissionBanner",function(){return{restrict:"EA",scope:!0,templateUrl:function(){return t.templatePath+"notification-permission-banner-directive.html"},controller:"eoNotificationPermissionBannerController"}})});