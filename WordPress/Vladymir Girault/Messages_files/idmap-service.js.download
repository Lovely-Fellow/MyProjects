define(["./common","angular"],function(t,e){"use strict";t.factory("eoIdMap",["$q","$cacheFactory","tlSocket",function(t,n,r){var u=n("idmap"),o=function(t,e,n){return u.get(t+"_"+e+"_"+n)},c=function(t,e,n,r){return u.put(t+"_"+e+"_"+n,r)};return{get:function(n,u,i){e.isArray(i)||(i=[i]);for(var a,d={},s=[],f=0;f<i.length;++f)a=o(n,u,i[f]),a?d[i[f]]=a:s.push(i[f]);return s.length?r.send("idmap.get",{source:n,target:u,rids:s.join(",")}).then(function(t){for(var e=t.idmaps,r=0;r<e.length;++r)d[e[r].sourceId]=e[r].targetId,c(n,u,e[r].sourceId,e[r].targetId);return d},function(){return d}):t.when(d)},isFromElance:function(t){return this.get("odesk.developer.rid","elance.user.rid",t).then(function(e){return!!e[t]})}}}])});