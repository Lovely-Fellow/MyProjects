(function (angular) {

    'use strict';

    angular.module('mftFeedback').factory('MftFeedbackApiService', MftFeedbackApiService);

    MftFeedbackApiService.$inject = ['$http', '$httpParamSerializerJQLike', 'FEEDBACK_API_URL'];

    function MftFeedbackApiService($http, $httpParamSerializerJQLike, FEEDBACK_API_URL) {
        return {
            /**
             * Sends feedback data to the user_feedbacks table in the odesk_misc db
             * @param feedback
             * @returns {Promise}
             */
            sendFeedback:  function (feedback) {
                var data = {
                    comment: JSON.stringify(feedback)
                };
                return $http({
                    url: FEEDBACK_API_URL,
                    data: $httpParamSerializerJQLike(data),
                    headers: {'Content-Type': 'application/x-www-form-urlencoded'},
                    method: 'POST'
                });
            }
        };
    }
})(angular);