define(["angular","./rooms-controller","./rooms-index/rooms-index","./rooms-invite/rooms-invite","./rooms-directory/rooms-directory","./rooms-chat/rooms-chat","./rooms-users/rooms-users","./rooms-files/rooms-files","./rooms-notes/rooms-notes","./rooms-panel/rooms-panel","./rooms-search/rooms-search","./rooms-info/rooms-info"],function(o,e){"use strict";return o.module("eoRooms",["eoRoomsChat","eoRoomsIndex","eoRoomsInvite","eoRoomsDirectory","eoRoomsUsers","eoRoomsFiles","eoRoomsNotes","eoRoomsPanel","eoRoomsSearch","eoRoomsInfo"]).config(["$stateProvider","eoDashConfig",function(o,s){o.state("rooms",{url:s.prefixURL+"/rooms",abstract:!0,templateUrl:"@templates/rooms/rooms.html",controller:e,data:{title:"Messages"},resolve:{rooms:["$rootScope","eoRoomCollection","eoRooms","eoRoomListCache","eoAuth","eoUsers","$q","eoDashConfig",function(o,e,s,r,t,n,m,a){if(o.isWidget&&o.widgetRoomId)return m.when(e.mixInto([]));var i=new Date;i.setDate(i.getDate()-a.rooms.list.cache.recentDays),i=i.getTime();var c=r.getCacheDate();if(a.rooms.list.cache.enabled&&c>i)return console.info("getting rooms from cache"),m.when(r.get());console.info("getting fresh rooms data");var l=new Date;return l.setDate(l.getDate()-a.rooms.recentDays),l=l.getTime(),s.search({limit:a.rooms.perPage,includeHidden:!1,activeSince:l,sortOrder:"recentTimestamp",includeRoomNote:!0}).then(function(o){return o.length?o:s.search({limit:a.rooms.perPage})})}]}}),o.state("rooms.contact",{url:"/contact?code",controller:["$state","$stateParams","eoRoomDialog",function(o,e,s){var r={error:{code:e.code?parseInt(e.code):405}};s.showContactUs(r).then(function(){o.go("rooms.index")})}]})}])});