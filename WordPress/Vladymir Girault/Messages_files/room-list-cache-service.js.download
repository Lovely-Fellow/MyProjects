define(["./room","angular","lodash"],function(t,e,r){"use strict";t.factory("eoRoomListCache",["$window","$log","eoAuth","eoDashConfig","eoRooms",function(t,o,n,a,c){var u=t.localStorage,i=function(){return"rs_"+n.user.userId+"_"+n.user.orgId},f=function(t){var r=[];return e.forEach(t,function(t){r.push(t.toJSON())}),e.toJson({cacheDate:(new Date).getTime(),data:r})},s=r.throttle(function(t){try{u.setItem(i(),f(t))}catch(t){console.log(t)}},5e3,{leading:!1}),g={get:function(){try{var t=e.fromJson(u.getItem(i()));if(t){var r=c.convertToList({rooms:t.data});return r.fromStorage=!0,r}return!1}catch(t){return o.error(t),!1}},getCacheDate:function(){try{var t=e.fromJson(u.getItem(i()));return!!t&&t.cacheDate}catch(t){return o.error(t),!1}},put:function(t){s(t)},reset:function(){u.removeItem(i())}};return function(){return g}()}])});