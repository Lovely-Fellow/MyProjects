define(["./layout","angular","lodash"],function(t,e,o){"use strict";function i(t,o,i,n,r,u,s,a,p,c){this.$scope=t,this.$location=o,this.$timeout=i,this.eoAboutDialog=u,this.eoAuth=a,this.eoVisibility=s,this.isTeamApp=p.isTeamApp(),this.isIntegratedDesign=this.isTeamApp&&c.isIntegratedDesign(),this.eoTeamApp=c,this.quitText=e.isDefined(n.os)&&n.os===r.MAC?"Quit":"Exit"}i.$inject=["$scope","$location","$timeout","deviceDetector","OS","eoAboutDialog","eoVisibility","eoAuth","eoDashContext","eoTeamApp"],Object.defineProperty(i.prototype,"visibility",{enumerable:!0,configurable:!1,get:function(){return this.eoVisibility.getVisibility()},set:function(t){this.eoVisibility.setVisibility(t)}}),Object.defineProperty(i.prototype,"organization",{enumerable:!0,configurable:!1,get:function(){return this.eoAuth.organization}}),Object.defineProperty(i.prototype,"user",{enumerable:!0,configurable:!1,get:function(){return this.eoAuth.user}}),i.prototype.changeCompany=function(t,e){var o=this;this.eoAuth.changeCompany(e).then(function(){o.$location.path("/")}),t.preventDefault()},i.prototype.showUnreadNotification=function(){var t=this;return o.some(t.eoAuth.user.organizations,function(e){return e.uid!==t.eoAuth.organization.uid&&(e.unreadCount>0||e.mentionsCount>0)})},i.prototype.logout=function(){var t=this;this.$timeout(function(){t.eoAuth.logout()})},i.prototype.showAbout=function(){this.eoAboutDialog.show()},i.prototype.executeTeamAppCommand=function(t){this.eoTeamApp.notifyOTA("app:navigate",t,!0)},i.$inject=["$scope","$location","$timeout","deviceDetector","OS","eoAboutDialog","eoVisibility","eoAuth","eoDashContext","eoTeamApp"],t.controller("eoUserMenuController",i),t.directive("eoUserMenu",function(){return{restrict:"EA",scope:!0,bindToController:{showVisibilitySelector:"=",dropdownLeft:"=",dropdownUp:"="},templateUrl:function(){return t.templatePath+"user-menu-directive.html"},controllerAs:"ctrl",controller:"eoUserMenuController"}})});