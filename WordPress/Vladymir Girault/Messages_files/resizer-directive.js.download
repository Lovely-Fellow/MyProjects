define(["./common","angular"],function(e,t){"use strict";e.factory("eoResizerAPI",["$window",function(e){return{getInitialWidth:function(t){var n=parseInt(e.localStorage.getItem("panel-"+t));return n>0?n:null},setWidth:function(t,n){e.localStorage.setItem("panel-"+t,n)}}}]).directive("eoResizer",["$document","$window","eoResizerAPI",function(e,n,i){return{restrict:"E",controller:["$scope","$element","$attrs",function(r,o,s){function u(e){t.element("#"+f).css({width:e}),t.element("#"+h).attr("style","width: calc(100% - "+e+"px); width: -webkit-calc(100% - "+e+"px)"),i.setWidth(f,e),t.element(n).trigger("layout-resize")}function l(e){var t=e.pageX,n=(t-d)*g,i=m+n;i>W?i=W:i<p&&(i=p),u(i)}function a(){e.unbind("mousemove",l),e.unbind("mouseup",a),e[0].body.style.cursor="default",d=0}function c(){var e=t.element("#"+h);if(e.is(":visible")&&e.outerWidth()<v){var n=t.element("#"+f).outerWidth()+e.outerWidth()-v;n>p&&u(n)}}var d=0,m=0,f=s.resizerPanel,h=s.resizerFluidPanel,p=parseInt(s.resizerMinWidth),z=parseInt(s.resizerMaxWidth),v=parseInt(s.resizerMinFluidWidth),W=z,g="right"===s.resizerDirection?-1:1;o.on("mousedown",function(n){n.preventDefault(),m=t.element("#"+f).outerWidth(),d=n.pageX;var i=m+t.element("#"+h).outerWidth()-v;i<p&&(i=p),W=Math.min(z,i),e.on("mousemove",l),e.on("mouseup",a),e[0].body.style.cursor="col-resize"}),t.element(n).on("resize",c),r.$on("$destroy",function(){t.element(n).off("resize",c)})}]}}])});