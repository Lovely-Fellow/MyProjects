define([],function(){"use strict";return["$scope","$state","$stateParams","room","$q","eoDashContext",function(o,i,t,n,e,a){function r(o){switch(o){case"topic":return n.patchTopic();case"roomName":return n.patchName();default:return e.when()}}var c=["roomName","topic"];o.isEditing=!1,o.form={},o.isRoomInfoFormValid=!0,o.roomNameValidationMessage="",c.forEach(function(i){o.form[i]=n[i]}),o.autofocus=t.focus,o.canEdit=function(){return n.canEditRoom()&&!a.isReadOnlyMode()},o.acceptEdits=function(){if(!o.isRoomInfoFormValid)return!1;if(!o.canEdit())return e.reject("Editing is disallowed in this mode");var i=[];return c.forEach(function(t){o.form[t]!==n[t]&&(n[t]=o.form[t],i.push(r(t)))}),e.all(i).then(function(){o.isEditing=!1},function(){})},o.edit=function(){o.canEdit()&&(o.isEditing=!0)},o.cancel=function(){o.isEditing=!1},o.validateRoomName=function(){""===o.form.roomName.trim()?(o.isRoomInfoFormValid=!1,o.roomNameValidationMessage="The room name can not be empty."):(o.isRoomInfoFormValid=!0,o.roomNameValidationMessage="")},t.edit&&o.edit()}]});