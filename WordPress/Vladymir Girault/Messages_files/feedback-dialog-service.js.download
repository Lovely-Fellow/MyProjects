define(["./common"],function(e){"use strict";e.controller("eoFeedbackDialogCtrl",["$modal","$modalInstance","eoAuth","eoAlert","eventLog","config","eoDashContext",function(e,o,t,s,r,i,n){this.config=i,this.errors=[],this.form={env:n.getName(),tokboxSessionId:i&&i.tokboxSessionId?i.tokboxSessionId:"",type:"",message:""},this.submit=function(){if(this.errors=[],!this.form.type)return void this.errors.push('Select "bug" or "feedback" so we know how to handle your request appropriately.');if(!this.form.message)return void this.errors.push("Please describe the issue you are encountering.");if(this.form.message.length>1e3)return void this.errors.push("Comments can have a maximum length of 1000 characters.");var e={event:(i&&i.tokboxSessionId?"call_":"")+this.form.type,location:"dash",sublocation:i&&i.sublocation?i.sublocation:"",type:"dash_call",timestamp:new Date,userId:t.user.userId,data:[this.form]};r.log(e),o.dismiss(""),s.inline({type:"success",template:"Thank you for your feedback!"})}}]),e.factory("eoFeedbackDialog",["$modal",function(o){return{show:function(t){return o.open({templateUrl:e.templatePath+"feedback-dialog.html",controller:"eoFeedbackDialogCtrl as ctrl",windowClass:"notifications",animation:!1,resolve:{config:t}})}}}])});