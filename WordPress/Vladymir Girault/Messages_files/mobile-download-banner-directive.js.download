define(["./layout","angular"],function(e,t){"use strict";e.directive("eoMobileDownloadBanner",function(){return{restrict:"EA",scope:!0,templateUrl:function(){return e.templatePath+"mobile-download-banner-directive.html"},controllerAs:"ctrl",controller:["eoDashConfig","eoUsers","eoAuth","eoAlert","$rootScope","$window","eoDashContext",function(e,n,o,i,a,r,l){function s(e){n.saveSettings(!0,"WorkplaceBanners",{downloadMobileApp:e})}var c=this;c.dismiss=function(){c.show=!1,a.$emit("autoheight:recalculate"),s(-1)},c.textMe=function(){require(["https://cdn.branch.io/branch-latest.min.js"],function(){a.$evalAsync(function(){c.dismiss()}),r.branch.init(e.branchApi.key),r.walkme_event=function(e){"GoalCompleted"===e.Type&&375624===e.WalkthruId&&a.$apply(function(){i.inline({type:"success",template:"Success!<br> Check your mobile device for the download link.",duration:5e3})})},r.WalkMeAPI.startWalkthruById(375624)})},n.getLocalSettings(o.user.userId).then(function(e){var n=parseInt(e.banners.downloadMobileApp);-1!==n&&n<3&&!l.isMobile()&&!l.isWidget()&&(c.show=!0,c.supportsWalkMe=t.isDefined(r.WalkMeAPI),a.$emit("autoheight:recalculate"),s(n+1))})}]}})});