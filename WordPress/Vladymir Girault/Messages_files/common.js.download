define(["angular","template-path","lodash","config-service","ui.router","angularFileUpload","eoComponents","dashCache","ngAnimate","transportLayer","ngDeviceDetector","ngCookies","ngSanitize","ngMessages","upWebApi"],function(e,o,n){"use strict";var t=e.module("eoCommon",["eoDashConfig","ui.router","angularFileUpload","ngAnimate","ng.deviceDetector","components.core.select","components.core.progressbar","components.core.pagination","components.core.typeahead","components.core.toggle","components.core.buttons.toggle","components.core.datepicker","components.core.config","components.core.templates","components.core.navigation","components.core.dropdown","components.core.channels","components.core.model","components.core.log.models","components.core.fields","components.core.block","components.core.smf","components.core.modal","components.core.dash.cache","components.core.storage","components.core.alert","components.core.popover","components.core.rating","components.core.metrics","components.core.psmetrics","components.core.safeBrowsing.services","components.core.authorization.oauth2.slaveToken","upwork.transport","ngCookies","ngSanitize","up.webApi"]),r=t.templatePath=o("common/");return t.config(["$provide","upWebApiConfigurationProvider","eoDashConfig",function(o,t,s){t.configure({hostUri:s.webApi.baseHost}),o.decorator("upWebApiAuth",["$delegate","eoOauth",function(e,o){return e.refreshOAuthToken=function(){return o.refreshToken().then(function(){return o.getToken()})},e}]),o.decorator("eoSlaveTokenHelpers",["$delegate","eoOauth",function(e,o){return e.getNewSlaveToken=function(){return o.refreshToken().then(function(){return{token:o.getToken()}})},e}]),o.decorator("$rootScope",["$delegate",function(e){return e.constructor.prototype.$onRootScope=function(o,n){this.$on("$destroy",e.$on(o,n))},e}]),o.decorator("$modal",["$rootScope","$delegate","$timeout",function(o,t,s){var c=function(n){return e.extend(o.$new(!0),n)},a=t.open;return t.open=function(e){return e.size&&"md"!==e.size||(e.windowClass="dash-modal "+(e.windowClass?e.windowClass:"")),a(e)},t.messageBox=function(o,s,a,i){i=i||{},"string"==typeof s&&(s=[s]),i.showClose=!e.isDefined(i.showClose)||i.showClose;var p=c({title:o,messages:s,buttons:a,hideErrors:i.hideErrors,showClose:i.showClose,showDetails:!1}),u={templateUrl:r+"message-box.html",scope:p,controller:["$scope",function(e){e.toggleDetails=function(o){o.preventDefault(),e.$parent.showDetails=!e.$parent.showDetails}}]},l=t.open(n.merge(u,i));return l.result.finally(function(){p.$destroy()}),l},t.promptBox=function(e,o){var n=[{result:!1,label:"No",cssClass:"btn-default"},{result:!0,label:"Yes",cssClass:"btn-primary",focus:!0}];return t.messageBox(e,o,n)},t.confirmBox=function(e){var o=t.messageBox("Confirmation",e);return o.opened.then(function(){s(function(){o.dismiss()},2e3)}),o},t}])}])});