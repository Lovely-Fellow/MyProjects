define(["./layout","angular"],function(t,e){"use strict";t.directive("eoBodyAutoheight",["$window","$interval","$rootScope","$timeout","eoChannel","SMF_CHANNEL","SMF_CONFIG","eoDashContext",function(t,o,n,i,c,r,u,a){return{restrict:"A",priority:1e4,link:function(l,f,s){function h(){var t=f.outerHeight(!0);0===f.outerWidth(!0)?t=0:a.isSudo()&&s.applySudoHeight&&(t+=70),s.targetSelector=s.targetSelector?s.targetSelector:".body",t!==d&&(d=t,e.element(s.targetSelector).css("height","calc(100% - "+t+"px)"),n.$broadcast("room.uiResize"))}var d,g=[r+"."+u.location,r+".very_top"];e.element(t).on("resize",function(){e.element('div[type="notification"][role="alert"]')&&i(function(){h()},10)}),l.$onRootScope("autoheight:recalculate",function(){i(function(){h()},10)}),e.forEach(g,function(t){c.onDismiss(t,l,function(){o(function(){h()},500,10)}),c.subscribe(t,l,function(){i(function(){h()},10)})})}}}])});