define(["./common","angular"],function(t,e){"use strict";t.controller("retryDialogCtrl",["$scope","$interval",function(t,o){var n,r=this;this.title=t.title||"Attempting Recovery",this.message=t.message||"An error has occurred while processing your request.",t.$watch("retryDetails",function(t){t&&(o.cancel(n),r.seconds=+(t.backOffDelay/1e3).toFixed(0)||0,r.manualRetryAllowed=r.seconds>10&&e.isFunction(t.attemptRecovery),r.attemptRecovery=t.attemptRecovery,r.maxAttempts=+t.maxAttempts,r.attempts=+t.attempts,isNaN(r.seconds)?r.seconds=0:n=o(function(){r.seconds-=1,r.seconds<=0&&(r.seconds=0,o.cancel(n),n=null)},1e3))})}]),t.factory("eoRetryDialog",["$modal","$rootScope",function(e,o){function n(n){return n=n||o,e.open({templateUrl:t.templatePath+"retry-dialog.html",controller:"retryDialogCtrl as ctrl",windowClass:"notifications",scope:n||o})}var r;return{open:function(t){return r&&r.dismiss("reopening modal"),r=n(t),r.result.finally(function(){r=null}),r}}}])});