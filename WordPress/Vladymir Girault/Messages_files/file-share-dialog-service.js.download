define(["./common"],function(e){"use strict";e.controller("eoFileShareDialogCtrl",["$modalInstance","eoAlert","eoFiles","file",function(e,i,n,l){var t=this;l.fileId?(t.creatingLink=!0,n.createSharedFileLink(l).then(function(e){t.fileLink=e},function(){i.inline({type:"danger",template:"Could not create file link."}),e.dismiss("")}).finally(function(){t.creatingLink=!1})):t.fileLink=l.objectUrl,t.copySuccess=function(){i.inline({type:"success",template:"Link copied to clipboard."}),e.close("")},t.copyFail=function(){i.inline({type:"danger",template:"Cannot copy link to clipboard. Please copy the link manually."})}}]),e.factory("eoFileShareDialog",["$modal",function(i){return{show:function(n){return i.open({templateUrl:e.templatePath+"file-share-dialog.html",controller:"eoFileShareDialogCtrl as ctrl",windowClass:"notifications modal-compact",resolve:{file:n}}).result}}}])});