define(["angular"],function(e){"use strict";return["$scope","$window","$stateParams","eoDashConfig","eoDiagnosticTestRunner","WebSocketService","tlSocket","upDashMetrics",function(o,s,r,t,n,i,a,c){c.count("loadError");if(a.close("UNABLE_TO_CONNECT"),o.showReload=!0,o.showDiagnose=!1,o.title="Unable to load messages",o.subtitle="",o.errors=[],o.reload=function(){c.count("manualReload"),s.location.assign(t.prefixURL)},o.close=function(){s.close()},o.diagnose=function(e){o.diagnoseResult=!1,o.runningDiagnose=!0,a.reconnect(),n.run().then(function(){var e={antivirus:o.antivirus,firewall:o.firewall};return n.report(o.errorDescription,e)}).then(function(){e&&e.close(),o.diagnoseResult="Error Report sent.",o.diagnoseSuccess=!0}).catch(function(){o.diagnoseResult="Error Report could not be sent - please try again.",o.diagnoseSuccess=!1}).finally(function(){a.close("UNABLE_TO_CONNECT"),o.runningDiagnose=!1,o.diagnoseRunAlready=!0})},r.data){var l=e.fromJson(r.data);l.errors&&(Array.isArray(l.errors)||(l.errors=[l.errors]),o.errors=function(e){return e.map(function(e){return e.message})}(l.errors)),o.showClose=!!l.showClose,o.showReload=e.isDefined(l.showReload)?l.showReload:o.showReload,o.showDiagnose=!!l.showDiagnose,o.showWebsocketError=!!l.showWebsocketError,o.noAccess=!!l.noAccess,o.throttling=!!l.throttling,o.showWebsocketError?o.title="Your browser does not support Websockets":o.noAccess?o.title="You don't have chat access to this company":o.throttling&&(o.title="We're experiencing an abnormally high volume of traffic. Please try again later."),l.title&&(o.title=l.title),l.subtitle&&(o.subtitle=l.subtitle)}}]});