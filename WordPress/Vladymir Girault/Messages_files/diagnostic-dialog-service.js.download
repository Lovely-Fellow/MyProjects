define(["./common","./diagnostic-service","./auth-service"],function(t){"use strict";t.controller("diagnosticDialogCtrl",["$q","eoAuth","deviceDetector","eoDiagnosticTestRunner",function(t,i,n,o){this.tests=o.tests,this.deviceDetector=n,this.user=i.user,this.organization=i.organization,this.isRunning=o.isRunning,this.sendingReport=!1,this.run=function(){var t=this;t.reportData=null,o.run().then(function(){t.reportData=o.getDiagnoseData()})},this.report=function(){var t=this;this.sendingReport=!0,o.report().finally(function(){t.sendingReport=!1})},this.run()}]),t.factory("eoDiagnosticDialog",["$modal",function(i){return{show:function(){return i.open({templateUrl:t.templatePath+"diagnostic-dialog.html",controller:"diagnosticDialogCtrl as diagnostic",windowClass:"notifications modal-sticky"})}}}])});