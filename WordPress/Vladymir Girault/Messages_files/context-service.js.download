define(["./common","config-service","./applet-service","./team-app-service"],function(e){"use strict";e.factory("eoDashContext",["$window","$cookies","$rootScope","$location","eoDashConfig","eoTeamApp","eoApplet",function(e,t,n,i,o,r,a){var s,u=a.getOrganization();return s=u?{isODC:function(){return!0},getOrgId:function(){return u.getUid()||null},setOrganization:function(){},switchToOrg:function(e,t){var n={orgId:t.uid};this.isMobile()&&(n.mobile=!0),i.navigate(e,n)}}:{isODC:function(){return!1},getOrgId:function(){return t.get("dash_company_last_accessed")},setOrganization:function(e){var i=new Date;i.setTime(+i+31536e6),t.put("dash_company_last_accessed",e,{path:"/",expires:i}),n.$emit("organization:set",e)},switchToOrg:function(e,t){this.setOrganization(t.uid),i.navigate(e)}},s.isTeamApp=function(){return!!e.OTQ},s.isWidget=function(){return e.widgetOptions&&e.widgetOptions.enabled},s.isSudo=function(){return!!a.getVar("sudo")},s.pluginsSupported=function(){return!(this.isWidget()&&e.widgetOptions.flags.noplugins)},s.isReadOnlyMode=function(){var e=!1;return this.isSudo()?e="Not available in Sudo mode.":n.tlConnected||(e="Network disconnected."),e},s.hasDashOboAccess=function(){return this.isSudo()&&!!a.getVar("dashOboAccess")},s.useOauth2=function(){return!this.useSessionCookie()},s.useSessionCookie=function(){return(this.isODC()||this.isWidget())&&!0!==a.getVar("DashBinderOAuth2")},s.showSettings=function(){return!this.isTeamApp()||r.showSettings()},s.isIntegratedDesign=function(){return this.isTeamApp()&&r.isIntegratedDesign()},s._mobile=!!i.search().mobile,s.isMobile=function(){return s._mobile},s.showFavIcon=function(){return!this.isTeamApp()&&!this.isWidget()},s.getClientName=function(){return this.getName().toLowerCase().replace("uta","team-app")},s.isCanary=function(){return s.isIntegrated()&&!!e.location.href.match(/canary/)},s.isVideoPage=function(){return e.location.href.match(/upvideo/)},s.isStandalone=function(){return!s.isIntegrated()},s.isIntegrated=function(){return!!o.prefixURL},s.getName=function(){return s.isCanary()&&"Canary"||s.isMobile()&&"Mobile"||s.isTeamApp()&&"UTA"||s.isWidget()&&"Widget"||s.isIntegrated()&&"Integrated"||s.isStandalone()&&"Standalone"},s.webApiEnabled=function(){return o.feature.webApi.enabled},s.storyActionInterval=function(){return o.feature.storyAction.interval},s.markdownEnabled=function(e){return(e||new Date)>o.feature.markdown.timestamp},s}])});