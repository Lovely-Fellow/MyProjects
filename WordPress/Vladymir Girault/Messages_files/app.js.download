define(["angular","lazy-load","ngMessages","ngAnimate","ngSanitize","ui.router","ui.select","ui.utils","ui.sortable","angDragDrop","ngDeviceDetector","common","layout","room","config-service","./login/login","./error/error","rooms/rooms","search","./plugins/plugins","templates-components","eoComponents","collab-types","timing-js","mftFeedbackService"],function(e){"use strict";var o=e.module("app",["ngMessages","ngSanitize","ui.utils","ui.router","ui.select","ui.sortable","ang-drag-drop","ng.deviceDetector","eoDashConfig","eoCommon","eoLayout","eoLogin","eoError","eoRooms","eoSearch","eoPlugins","components.core.log","components.core.fields.input","components.core.psmetrics","components.core.tokenizer","components.core.typeahead","templates.components","components.core.tabs","components.core.dropdown","com.elanceodesk.workplace.collab_types","mftFeedback"]);return window.Applet&&window.Applet.getVar("LeavingUpworkComponent")?o.requires.push("components.core.safeBrowsing"):o.directive("eoSafeBrowsingContent",["$window","eoExternalLinkChecker",function(e,o){return{restrict:"A",scope:!1,link:function(n,t){t.on("click",function(n){var t=n.target,r=t.getAttribute("href");"A"===n.target.tagName&&""!==r&&null!==r&&-1!==r.indexOf("://")&&r.replace(/^.*:\/\//,"").split(/[:\/?]/g)[0]!==window.location.hostname&&(n.preventDefault(),e.open(o.addWarning(n.target.href),n.target.target||"_self"))})}}}]),o.run(["$window","$animate","$timeout","$rootScope","eoDashContext","eoPageVisibility","eoConfig","eoDashConfig","upDashMetrics","PSMETRICS_BEFORE_DELAY","MftFeedbackService",function(o,n,t,r,i,a,s,c,l,p,d){o.upDashMetrics.appRunStart=o.performance.now();if(n.enabled(!1),l.configure({context:i.getName()}),l.isEnabled()){var u=e.noop,m=e.noop,g=e.noop,f=e.noop,h=function(){m(),m=e.noop,u(),u=e.noop,f(),f=e.noop,g(),g=e.noop};f=a.$on("visibilitychange",function(){h()}),i.isMobile()?console.info("Initial room load metrics are unreliable from mobile and will be disregarded."):a.isVisible()?(m=r.$on("$stateChangeStart",function(o,n){if(n.name.match(/^rooms.chat.*/))m(),m=e.noop,u=r.$on("stories:rendered",function(){h(),l.time("initialRoomRendered"),l.getFirstRunSequence().time("RoomRendered").commit()});else{if(n.name.match(/^(rooms\.)?index/))return;h()}}),g=r.$on("$stateChangeError",function(){h()})):console.info("Page is not currently visible. Initial room load metrics will be disregarded.");var w={},v=e.noop;r.$on("$stateChangeStart",function(e,n){w[n.name]=o.performance.now(),v(),n.name.match(/^rooms\.chat.*/)&&(v=r.$on("stories:rendered",function(){l.time("roomRendered",o.performance.now()-w[n.name]),v()}))}),r.$on("$stateChangeError",function(){v()}),function(){t(function(){l.init(),l.count("loadStart",1),o.upDashMetrics&&e.forEach(o.upDashMetrics,function(e,o){l.time(o,e)})},p)}()}i.isODC()&&!i.isWidget()&&d.showFeedBackModal()}]).config(["$locationProvider","$urlRouterProvider","eoIdleProvider","tlSocketProvider","$httpProvider","tlLogProvider","tlMetricProvider","eoDashConfig","$stateProvider","eoFileAttachmentProvider","eoUserPreferenceProvider","$compileProvider","$provide","upDashMetricsProvider",function(o,n,t,r,i,a,s,c,l,p,d,u,m,g){var f=c.feature&&c.feature.psMetrics||{};window.upDashMetrics.appConfigStart=window.performance.now(),g.configure(f),o.html5Mode(!0),u.debugInfoEnabled(!!c.debug),t.idleTimeout(c.user.idleTimeout),n.when(/^\/home\/index\/.*/,["$location","$window",function(e,o){o.open(e.url(),"_self")}]),n.otherwise(c.prefixURL+"/"),r.setUrl(c.TL.baseURL+"wp"),r.setRPCTimeout(c.TL.RPCTimeout),r.setMetricOptions({flushInterval:c.TL.metric.flushInterval,enabled:c.TL.metric.enabled}),a.setBaseUrl(c.TL.baseURL),i.interceptors.splice(i.interceptors.indexOf("oErrorInterceptor"),1),i.interceptors.splice(i.interceptors.indexOf("oHeadersInterceptor"),1),i.interceptors.push("oDashHeadersInterceptor"),i.interceptors.push(function(){return{request:function(e){return"GET"!==e.method||e.cache&&e.cache.get(e.url)||(e.params||(e.params={}),e.params.v=window.dashVersion),e}}}),l.state("index",{url:c.prefixURL+"/",controller:["$state",function(e){e.go("rooms.index",{},{location:"replace"})}]}),l.state("apploading",{template:'<span class="glyphicon-lg air-icon-loading"></span>',resourceGroups:["public"]}),l.state("inactive",{url:c.prefixURL+"/inactive",template:"<span></span>",params:{force:null}}),l.state("inactive.widget",{url:"/widget",template:"<span></span>"}),p.config({thumbnailMaxWidth:360,thumbnailMaxHeight:360}),d.config({defaults:{readStateTracking:"immediate"}}),e.module("components.core.smf").constant("SMF_CONFIG",{group:"dash",page:null,module:null,location:"top"}),e.module("components.core.log").constant("LOG_EVENT_ENDPOINT",c.odeskBaseURL+"/api/o2/v1/logging/:id.json"),e.module("components.core.log").config(["$httpProvider",function(e){e.defaults.withCredentials=!0}]),window.initMftFeedback&&window.initMftFeedback(e)}]),e.element(document).ready(function(){window.upDashMetrics.angularBootStrapStart=window.performance.now(),e.bootstrap(document.body,[o.name],{strictDi:window.strictDi})}),o});