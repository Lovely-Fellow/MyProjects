define(["angular","ui.router"],function(o){"use strict";var t=o.module("eoRoomsInvite",["ui.router"]);return t.config(["$stateProvider",function(o){o.state("rooms.invite",{url:"/invite?email&orgId&roomId",controller:"roomsInviteCtrl",templateUrl:"@templates/rooms/rooms-invite/rooms-invite.html"})}]).controller("roomsInviteCtrl",["$scope","$state","$stateParams","eoUsers","eoRooms",function(t,e,r,n,i){var s=r.email,m=r.roomId;s&&n.getInvitations({email:s}).then(function(r){if(r&&r.length>0){var a=r[0];m?o.forEach(r,function(o){o.roomId===m&&(a=o)}):m=a.roomId,"Joined"===a.status?e.go("rooms.chat",{id:m}):"Pending"===a.status?n.resolveInvitedUsers(s).then(function(){e.go("rooms.chat",{id:m})}):(o.forEach(r,function(o){o.roomId&&i.getInfo(o.roomId).then(function(t){o.room=t})}),t.invites=r)}})}]),t});