(function(){var e,o,n,t,r,i,s,a,d,c,l,p,u,f,b,m,x,g,h,w,y,v,D,k,_,E,S,C,N=[].slice,L=[].indexOf||function(e){for(var o=0,n=this.length;o<n;o++)if(o in this&&this[o]===e)return o;return-1};if(null==window.Dropbox&&(window.Dropbox={}),null==Dropbox.baseUrl&&(Dropbox.baseUrl="https://www.dropbox.com"),null==Dropbox.blockBaseUrl&&(Dropbox.blockBaseUrl="https://dl.dropbox.com"),Dropbox.addListener=function(e,o,n){e.addEventListener?e.addEventListener(o,n,!1):e.attachEvent("on"+o,function(e){return e.preventDefault=function(){return this.returnValue=!1},n(e)})},Dropbox.removeListener=function(e,o,n){e.removeEventListener?e.removeEventListener(o,n,!1):e.detachEvent("on"+o,n)},t=function(e){var o,n;return n=encodeURIComponent(Dropbox.VERSION),o=-1===e.indexOf("?")?"?":"&",""+e+o+"version="+n},i=function(e,o){var n,r,i,s,a,d,c,l,p;return d=encodeURIComponent(window.location.protocol+"//"+window.location.host),n=encodeURIComponent(Dropbox.appKey),s=encodeURIComponent(e.linkType||""),c=encodeURIComponent(e._trigger||"js"),a=Boolean(e.multiselect),r=encodeURIComponent((null!=(p=e.extensions)&&"function"==typeof p.join?p.join(" "):void 0)||""),i=Boolean(e.folderselect),o=Boolean(o),l=Dropbox.baseUrl+"/chooser?origin="+d+"&app_key="+n+"&link_type="+s,l+="&trigger="+c+"&multiselect="+a+"&extensions="+r+"&folderselect="+i+"&iframe="+o,t(l)},_=function(e){var o,n,r;return n=encodeURIComponent(window.location.protocol+"//"+window.location.host),o=encodeURIComponent(Dropbox.appKey),r=Dropbox.baseUrl+"/saver?origin="+n+"&app_key="+o,t(r)},w=1,b=function(e,o){var n,r,i,s;if(n=encodeURIComponent(Dropbox.appKey),s=Dropbox.baseUrl+"/dropins/job_status?job="+o+"&app_key="+n,s=t(s),i=function(o){var n;"COMPLETE"===o.status?("function"==typeof e.progress&&e.progress(1),"function"==typeof e.success&&e.success()):"PENDING"===(n=o.status)||"DOWNLOADING"===n?(null!=o.progress&&"function"==typeof e.progress&&e.progress(o.progress/100),setTimeout(r,1500)):"FAILED"===o.status&&"function"==typeof e.error&&e.error(o.error)},"withCredentials"in new XMLHttpRequest)r=function(){var o;return o=new XMLHttpRequest,o.onload=function(){return i(JSON.parse(o.responseText))},o.onerror=function(){return"function"==typeof e.error?e.error():void 0},o.open("GET",s,!0),o.send()};else if(Dropbox.disableJSONP){if("undefined"==typeof XDomainRequest||null===XDomainRequest||"https:"!==document.location.protocol)throw new Error("Unable to find suitable means of cross domain communication");r=function(){var o;return o=new XDomainRequest,o.onload=function(){return i(JSON.parse(o.responseText))},o.onerror=function(){return"function"==typeof e.error?e.error():void 0},o.open("get",s),o.send()}}else r=function(){var o,n,t;return o="DropboxJsonpCallback"+w++,n=!1,window[o]=function(e){return n=!0,i(e)},t=document.createElement("script"),t.src=s+"&callback="+o,t.onreadystatechange=function(){var o;if("loaded"===t.readyState)return n||"function"==typeof e.error&&e.error(),null!=(o=t.parentNode)?o.removeChild(t):void 0},document.getElementsByTagName("head")[0].appendChild(t)};return"function"==typeof e.progress&&e.progress(0),r()},m=function(e,o,n){var t,r,i,s,a,d;switch(r=JSON.parse(e.data),i=void 0!==x&&null!==x&&n._popup?x.contentWindow:e.source,r.method){case"origin_request":e.source.postMessage(JSON.stringify({method:"origin"}),Dropbox.baseUrl);break;case"ready":null!=n.files&&(n._fetch_url_on_save?(d=function(){var e,o,t,r;for(t=n.files,r=[],e=0,o=t.length;e<o;e++)s=t[e],r.push({filename:s.filename});return r}(),a=JSON.stringify({method:"files_with_callback",params:d})):a=JSON.stringify({method:"files",params:n.files}),i.postMessage(a,Dropbox.baseUrl)),"function"==typeof n.ready&&n.ready();break;case"files_selected":case"files_saved":"function"==typeof o&&o(),"function"==typeof n.success&&n.success(r.params);break;case"progress":"function"==typeof n.progress&&n.progress(r.params);break;case"close_dialog":"function"==typeof o&&o(),"function"==typeof n.cancel&&n.cancel();break;case"web_session_error":"function"==typeof o&&o(),"function"==typeof n.webSessionFailure&&n.webSessionFailure();break;case"web_session_unlinked":"function"==typeof o&&o(),"function"==typeof n.webSessionUnlinked&&n.webSessionUnlinked();break;case"resize":"function"==typeof n.resize&&n.resize(r.params);break;case"error":"function"==typeof o&&o(),"function"==typeof n.error&&n.error(r.params);break;case"job_id":"function"==typeof o&&o(),b(n,r.params);break;case"save_callback":t=function(e){r={method:"continue_saving",params:{download_url:null!=e?e.url:void 0}},i.postMessage(JSON.stringify(r),Dropbox.baseUrl)},p(n,r,t);break;case"_debug_log":"undefined"!=typeof console&&null!==console&&console.log(r.params.msg)}},p=function(e,o,n){var t;e._fetch_url_on_save&&(t=e.files[0],"function"!=typeof t.url&&"function"==typeof e.error&&e.error("Something went wrong, file url callback not provided."),t.url(n))},x=null,a=function(){/\bTrident\b/.test(navigator.userAgent)&&null!=document.body&&null==x&&(x=document.createElement("iframe"),x.setAttribute("id","dropbox_xcomm"),x.setAttribute("src",Dropbox.baseUrl+"/static/api/1/xcomm.html"),x.style.display="none",document.body.appendChild(x))},Dropbox.createChooserWidget=function(e){var o;return o=d(i(e,!0)),o._handler=function(n){n.source===o.contentWindow&&n.origin===Dropbox.baseUrl&&m(n,null,e)},Dropbox.addListener(window,"message",o._handler),o},Dropbox.cleanupWidget=function(e){if(!e._handler)throw new Error("Invalid widget!");Dropbox.removeListener(window,"message",e._handler),delete e._handler},k=function(e,o){var n,t;return n=(window.screenX||window.screenLeft)+((window.outerWidth||document.documentElement.offsetWidth)-e)/2,t=(window.screenY||window.screenTop)+((window.outerHeight||document.documentElement.offsetHeight)-o)/2,"width="+e+",height="+o+",left="+n+",top="+t},Dropbox._dropinsjs_loaded)return void("undefined"!=typeof console&&null!==console&&"function"==typeof console.warn&&console.warn("dropins.js included more than once"));Dropbox._dropinsjs_loaded=!0,null==Dropbox.appKey&&(Dropbox.appKey=null!=(C=document.getElementById("dropboxjs"))?C.getAttribute("data-app-key"):void 0),S=function(e){return e},e="https://www.dropbox.com/developers/dropins/chooser/js",n=["text","documents","images","video","audio"],Dropbox.init=function(e){null!=e.translation_function&&(S=e.translation_function),null!=e.appKey&&(Dropbox.appKey=e.appKey)},d=function(e){var o;return o=document.createElement("iframe"),o.src=e,o.style.display="block",o.style.backgroundColor="white",o.style.border="none",o},D=function(e){var o,n,t,r,i,s,a,d;if("string"==typeof e[0])r=e.shift(),n="string"==typeof e[0]?e.shift():f(r),t=e.shift()||{},t.files=[{url:r,filename:n}];else{if(null==(t=e.shift()))throw new Error("Missing arguments. See documentation.");if((null==(a=t.files)||!a.length)&&"function"!=typeof t.files)throw new Error("Missing files. See documentation.");for(d=t.files,i=0,s=d.length;i<s;i++)o=d[i],"function"==typeof o.url&&(t._fetch_url_on_save=!0),o.filename||(o.filename=f(o.url));if(t._fetch_url_on_save&&t.files.length>1)throw new Error("File url as callback is only supported for single files.")}return t},Dropbox.save=function(){var e,o,n,t,r,i,s;if(e=1<=arguments.length?N.call(arguments,0):[],t=D(e),!Dropbox.isBrowserSupported())return void alert(S("Your browser does not support the Dropbox Saver"));if(t._popup=!0,"object"!=typeof t.files||!t.files.length)throw new Error("The object passed in must have a 'files' property that contains a list of objects. See documentation.");for(s=t.files,r=0,i=s.length;r<i;r++)if(n=s[r],t._fetch_url_on_save){if("function"!=typeof n.url)throw new Error("File urls should be either all functions or all urls, not a mix of both. See documentation.")}else if("string"!=typeof n.url)throw new Error("File urls to download incorrectly configured. Each file must have a url. See documentation.");return o=k(352,237),v(_(t),o,t)},v=function(e,o,n){var t,r,i,s,a;if(t=function(){s.closed||s.close(),Dropbox.removeListener(window,"message",r),clearInterval(a)},r=function(e){e.source!==s&&e.source!==(null!=x?x.contentWindow:void 0)||m(e,t,n)},i=function(){s.closed&&(t(),"function"==typeof n.cancel&&n.cancel())},!(s=window.open(e)))throw new Error("Failed to open a popup window. Dropbox.choose and Dropbox.save should only be called from within a user-triggered event handler such as a tap or click event.");return s.focus(),a=setInterval(i,100),Dropbox.addListener(window,"message",r),s},E=function(o){var t,r,i,s,a;if(null==o.success&&"undefined"!=typeof console&&null!==console&&"function"==typeof console.warn&&console.warn("You must provide a success callback to the Chooser to see the files that the user selects"),r=function(){return"undefined"!=typeof console&&null!==console&&"function"==typeof console.warn&&console.warn("The provided list of extensions or file types is not valid. See Chooser documentation: "+e),"undefined"!=typeof console&&null!==console&&"function"==typeof console.warn&&console.warn("Available file types are: "+n.join(", ")),delete o.extensions},null!=o.extensions&&null!=Array.isArray)if(Array.isArray(o.extensions))for(a=o.extensions,i=0,s=a.length;i<s;i++)t=a[i],!t.match(/^\.[\.\w$#&+@!()\-'`_~]+$/)&&L.call(n,t)<0&&r();else r();return o},r=function(e){var o,n,t,r,s,a;if(!Dropbox.isBrowserSupported())return void alert(S("Your browser does not support the Dropbox Chooser"));a=640,t=552,e.iframe?(s=d(i(e,!0)),s.style.width=a+"px",s.style.height=t+"px",s.style.margin="125px auto 0 auto",s.style.border="1px solid #ACACAC",s.style.boxShadow="rgba(0, 0, 0, .2) 0px 4px 16px",r=document.createElement("div"),r.style.position="fixed",r.style.left=r.style.right=r.style.top=r.style.bottom="0",r.style.zIndex="1000",r.style.backgroundColor="rgba(160, 160, 160, 0.2)",r.appendChild(s),document.body.appendChild(r),n=function(o){o.source===s.contentWindow&&m(o,function(){document.body.removeChild(r),Dropbox.removeListener(window,"message",n)},e)},Dropbox.addListener(window,"message",n)):(o=k(a,t),v(i(e),o,e))},Dropbox.choose=function(e){null==e&&(e={}),e=E(e),r(e)},Dropbox.isBrowserSupported=function(){var e;return e=h(),Dropbox.isBrowserSupported=function(){return e},e},h=function(){var e,o,n,t;for(t=[/IEMobile\/(7|8|9|10)\./,/BB10;/,/CriOS/],o=0,n=t.length;o<n;o++)if(e=t[o],e.test(navigator.userAgent))return!1;return"undefined"!=typeof JSON&&null!==JSON&&null!=window.postMessage&&null!=window.addEventListener},u=function(e){return e.replace(/\/+$/g,"").split("/").pop()},f=function(e){var o;return o=document.createElement("a"),o.href=e,u(o.pathname)},s=function(e,o){var n;return null!=o?o.innerHTML="":(o=document.createElement("a"),o.href="#"),o.className+=" dropbox-dropin-btn",Dropbox.isBrowserSupported()?o.className+=" dropbox-dropin-default":o.className+=" dropbox-dropin-disabled",n=document.createElement("span"),n.className="dropin-btn-status",o.appendChild(n),e=document.createTextNode(e),o.appendChild(e),o},Dropbox.createChooseButton=function(e){var o;return null==e&&(e={}),e=E(e),o=s(S("Choose from Dropbox")),Dropbox.addListener(o,"click",function(n){n.preventDefault(),r({success:function(n){o.className="dropbox-dropin-btn dropbox-dropin-success","function"==typeof e.success&&e.success(n)},cancel:e.cancel,linkType:e.linkType,multiselect:e.multiselect,folderselect:e.folderselect,extensions:e.extensions,iframe:e.iframe,_trigger:"button"})}),o},Dropbox.createSaveButton=function(){var e,o,n;return e=1<=arguments.length?N.call(arguments,0):[],n=D(e),o=e.shift(),o=s(S("Save to Dropbox"),o),Dropbox.addListener(o,"click",function(e){var t;if(e.preventDefault(),o.className.indexOf("dropbox-dropin-error")>=0||o.className.indexOf("dropbox-dropin-default")>=0||o.className.indexOf("dropbox-dropin-disabled")>=0){if(t=("function"==typeof n.files?n.files():void 0)||n.files,!(null!=t?t.length:void 0))return o.className="dropbox-dropin-btn dropbox-dropin-error",void("function"==typeof n.error&&n.error("Missing files"));Dropbox.save({files:t,success:function(){o.className="dropbox-dropin-btn dropbox-dropin-success","function"==typeof n.success&&n.success()},progress:function(e){o.className="dropbox-dropin-btn dropbox-dropin-progress","function"==typeof n.progress&&n.progress(e)},cancel:function(){"function"==typeof n.cancel&&n.cancel()},error:function(e){o.className="dropbox-dropin-btn dropbox-dropin-error","function"==typeof n.error&&n.error(e)}})}}),o},y=function(e,o){return"background: "+e+";\nbackground: -moz-linear-gradient(top, "+e+" 0%, "+o+" 100%);\nbackground: -webkit-linear-gradient(top, "+e+" 0%, "+o+" 100%);\nbackground: linear-gradient(to bottom, "+e+" 0%, "+o+" 100%);\nfilter: progid:DXImageTransform.Microsoft.gradient(startColorstr='"+e+"', endColorstr='"+o+"',GradientType=0);"},c=document.createElement("style"),c.type="text/css",l='@-webkit-keyframes rotate {\n  from  { -webkit-transform: rotate(0deg); }\n  to   { -webkit-transform: rotate(360deg); }\n}\n\n@keyframes rotate {\n  from  { transform: rotate(0deg); }\n  to   { transform: rotate(360deg); }\n}\n\n.dropbox-dropin-btn, .dropbox-dropin-btn:link, .dropbox-dropin-btn:hover {\n  display: inline-block;\n  height: 14px;\n  font-family: "Lucida Grande", "Segoe UI", "Tahoma", "Helvetica Neue", "Helvetica", sans-serif;\n  font-size: 11px;\n  font-weight: 600;\n  color: #636363;\n  text-decoration: none;\n  padding: 1px 7px 5px 3px;\n  border: 1px solid #ebebeb;\n  border-radius: 2px;\n  border-bottom-color: #d4d4d4;\n  '+y("#fcfcfc","#f5f5f5")+"\n}\n\n.dropbox-dropin-default:hover, .dropbox-dropin-error:hover {\n  border-color: #dedede;\n  border-bottom-color: #cacaca;\n  "+y("#fdfdfd","#f5f5f5")+"\n}\n\n.dropbox-dropin-default:active, .dropbox-dropin-error:active {\n  border-color: #d1d1d1;\n  box-shadow: inset 0 1px 1px rgba(0,0,0,0.1);\n}\n\n.dropbox-dropin-btn .dropin-btn-status {\n  display: inline-block;\n  width: 15px;\n  height: 14px;\n  vertical-align: bottom;\n  margin: 0 5px 0 2px;\n  background: transparent url('"+Dropbox.baseUrl+"/static/images/widgets/dbx-saver-status.png') no-repeat;\n  position: relative;\n  top: 2px;\n}\n\n.dropbox-dropin-default .dropin-btn-status {\n  background-position: 0px 0px;\n}\n\n.dropbox-dropin-progress .dropin-btn-status {\n  width: 18px;\n  margin: 0 4px 0 0;\n  background: url('"+Dropbox.baseUrl+"/static/images/widgets/dbx-progress.png') no-repeat center center;\n  -webkit-animation-name: rotate;\n  -webkit-animation-duration: 1.7s;\n  -webkit-animation-iteration-count: infinite;\n  -webkit-animation-timing-function: linear;\n  animation-name: rotate;\n  animation-duration: 1.7s;\n  animation-iteration-count: infinite;\n  animation-timing-function: linear;\n}\n\n.dropbox-dropin-success .dropin-btn-status {\n  background-position: -15px 0px;\n}\n\n.dropbox-dropin-disabled {\n  background: #e0e0e0;\n  border: 1px #dadada solid;\n  border-bottom: 1px solid #ccc;\n  box-shadow: none;\n}\n\n.dropbox-dropin-disabled .dropin-btn-status {\n  background-position: -30px 0px;\n}\n\n.dropbox-dropin-error .dropin-btn-status {\n  background-position: -45px 0px;\n}\n\n@media only screen and (-webkit-min-device-pixel-ratio: 1.4) {\n  .dropbox-dropin-btn .dropin-btn-status {\n    background-image: url('"+Dropbox.baseUrl+"/static/images/widgets/dbx-saver-status-2x.png');\n    background-size: 60px 14px;\n    -webkit-background-size: 60px 14px;\n  }\n\n  .dropbox-dropin-progress .dropin-btn-status {\n    background: url('"+Dropbox.baseUrl+"/static/images/widgets/dbx-progress-2x.png') no-repeat center center;\n    background-size: 20px 20px;\n    -webkit-background-size: 20px 20px;\n  }\n}\n\n.dropbox-saver:hover, .dropbox-chooser:hover {\n  text-decoration: none;\n  cursor: pointer;\n}\n\n.dropbox-chooser, .dropbox-dropin-btn {\n  line-height: 11px !important;\n  text-decoration: none !important;\n  box-sizing: content-box !important;\n  -webkit-box-sizing: content-box !important;\n  -moz-box-sizing: content-box !important;\n}\n",c.styleSheet?c.styleSheet.cssText=l:c.textContent=l,document.getElementsByTagName("head")[0].appendChild(c),setTimeout(a,0),o=function(){return document.removeEventListener?document.removeEventListener("DOMContentLoaded",o,!1):document.detachEvent&&document.detachEvent("onreadystatechange",o),a(),g()},"complete"===document.readyState?setTimeout(o,0):document.addEventListener?document.addEventListener("DOMContentLoaded",o,!1):document.attachEvent("onreadystatechange",o),Dropbox.VERSION="2",g=function(){var e,o,n,t;for(t=document.getElementsByTagName("a"),o=0,n=t.length;o<n;o++)e=t[o],L.call((e.getAttribute("class")||"").split(" "),"dropbox-saver")>=0&&function(e){Dropbox.createSaveButton({files:function(){return[{url:e.getAttribute("data-url")||e.href,filename:e.getAttribute("data-filename")||u(e.pathname)}]}},e)}(e)}}).call(this);