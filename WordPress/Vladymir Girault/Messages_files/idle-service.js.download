define(["./common"],function(e){"use strict";e.provider("eoIdle",function(){var e=0;this.idleTimeout=function(n){e=n},this.$get=["$window","$document","tlUser","tlSocket",function(n,t,o,c){var r,i,s,u,l=0,a=function(){l++,l>=e?r||(r=!0,c.query.presence="away",o.$emit("presence",{show:"away"})):r&&(c.query.presence="online",r=!1,o.$emit("presence",{show:"online"}))},w=function(){r?o.$emit("presence",{show:"away"}):o.$emit("presence",{show:"online"})};return e>0&&t.on("mousemove keydown DOMMouseScroll mousewheel mousedown touchstart",function(){l=0}),{watch:function(){s||(i=n.setInterval(a,1e3),u=n.setInterval(w,6e5),s=!0)},unwatch:function(){s&&(delete c.query.presence,n.clearInterval(i),n.clearInterval(u),i=u=s=null)}}}]})});