define(["angular","ui.router"],function(o){"use strict";var e=o.module("eoRoomsIndex",["ui.router"]);return e.config(["$stateProvider",function(o){o.state("rooms.index",{url:"",controller:"roomsIndexCtrl",templateUrl:"@templates/rooms/rooms-index/rooms-index.html"})}]).controller("roomsIndexCtrl",["$scope","$rootScope","eoAuth","eoRoomDialog","rooms","$state","$window","$timeout",function(o,e,t,n,r,i,l,u){var d=null,s=null;if(e.widgetRoomId?d=e.widgetRoomId:(d=l.localStorage.getItem("lastRoom"))&&(d=d.split("#"),d=d[1]===t.user.userId&&d[2]===t.user.orgId?d[0]:null),d?s=d:(s=r.getMostRecentRoom())&&(s=s.roomId),s)return void u(function(){e.isMobile||!e.$breakpoint.mdUp?(e.$emit("view:rooms:show"),o.loaded=!0):(i.go("^.chat",{id:s},{location:"replace"}),i.params.id=s)},0,!1);o.enablePublicRooms=t.organization&&t.organization.enablePublicRooms,o.orgId=t.user.orgId,o.createRoomModal=function(){n.create().result.then(function(e){o.open(e.roomId)})},o.findPublicRoomModal=function(){n.findPublic().result.then(function(e){o.open(e)})},o.isClient=t.isClient(),o.loaded=!0}]),e});