define(["./common","angular","lodash","./diagnostic-dialog-service"],function(e,o,t){"use strict";e.factory("eoKeyboardShortcut",["$window","$document","eoDiagnosticDialog","$modalStack","$rootScope",function(e,n,i,a,d){var c=!0;return{disableFocus:function(){c=!1},enableFocus:function(){c=!0},capture:function(){var e=t.throttle(function(){var e=o.element(":focus");if(!a.getTop()&&(!e||!e[0]||"TEXTAREA"!==e[0].nodeName&&"INPUT"!==e[0].nodeName)){var t=n.find(".msg-composer-input");t&&t.focus()}},2e3);n.bind("keydown",function(o){var t=o.ctrlKey||o.metaKey;if(68===o.keyCode&&t&&o.altKey)i.show(),o.preventDefault();else if(70===o.keyCode&&t&&o.shiftKey){var r=n.find("eo-spotlight input");r&&!n.find(".spotlight-modal").is(":visible")&&n.find("eo-spotlight input").focus(),o.preventDefault()}else 191===o.keyCode&&o.altKey?(n.find("#shortcut-help").click(),o.preventDefault()):(!t||t&&86===o.keyCode)&&!o.altKey&&(o.keyCode>=48&&o.keyCode<=57||o.keyCode>=65&&o.keyCode<=90||8===o.keyCode||46===o.keyCode)?c&&e():(114===o.keyCode||t&&70===o.keyCode)&&(a.getTop()||d.$broadcast("inroomsearch:open"),o.preventDefault())})}}}])});