define(["./common","angular","lodash","./auth-service"],function(r,e,s){"use strict";r.factory("eoResponseHandler",["$modal","$log","$location","eoAuth",function(r,a,t,i){return{errors:function(o,n){var u,c="Error",l=!0,d=!1,m="An error has occurred, please try again";if(o&&!e.isArray(o)&&(o=[o]),o&&o.length){var f=o[0];f.message&&(m=f.message),d="close"===f.type,"timeout"===f.type&&(c="Timeout"),f.data&&f.data,f.hideMessage&&(l=!1),!!s.find(o,{code:401})}var h=null;if(i.user&&(h=i.user.uid),a.warn(m,"uid="+h,o),n&&(u={hideErrors:!0}),l){var g=[{label:"Close",cssClass:"btn-primary",dismiss:!0}],p=s.isEmpty(o)?[]:o.map(function(r){return"Error: "+(r=s.isObject(r)||s.isArray(r)?JSON.stringify(r):r)});0===p.length&&p.push(m),r.messageBox(c,p,g,u).result.catch(function(){d||t.path("/")})}}}}])});